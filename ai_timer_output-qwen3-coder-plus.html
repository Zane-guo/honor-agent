<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ä¸­æ¬§ä¸‰å›½å†¬æ—¥æ…¢æ—…</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root {
      --primary-color: #4a6fa5;
      --text-color: #333;
      --bg-color: #f9f9f9;
      --border-color: #ddd;
      --highlight-border: gold;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    .trip-header {
      position: relative;
      padding: 20px;
      text-align: center;
      background: linear-gradient(to right, #c9d6ff, #e2e2e2);
      color: white;
      overflow: hidden;
    }

    .trip-header h1[contenteditable], .trip-header p[contenteditable] {
      outline: none;
      border-radius: 4px;
      transition: background 0.2s;
    }

    .trip-header h1:focus, .trip-header p:focus {
      background: rgba(255, 255, 255, 0.2);
    }

    .info-line {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 10px;
      font-size: 14px;
    }

    .canvas-bg {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .trip-overview {
      padding: 15px;
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    #map {
      height: 250px;
      border-radius: 12px;
      margin-top: 10px;
    }

    .city-block {
      padding: 15px;
    }

    .day-title {
      font-weight: bold;
      margin-bottom: 10px;
      cursor: pointer;
      user-select: none;
    }

    .timeline-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-left: 10px;
      border-left: 2px solid var(--border-color);
      padding-left: 15px;
    }

    .timeline-item {
      position: relative;
      background: white;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .time-point::before {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background: var(--primary-color);
      border-radius: 50%;
      left: -21px;
      top: 15px;
      transform: translateX(-50%);
    }

    .image-grid {
      display: flex;
      overflow-x: auto;
      gap: 10px;
      margin-top: 10px;
      padding-bottom: 5px;
    }

    .image-wrapper {
      position: relative;
      min-width: 120px;
      height: 120px;
      border-radius: 6px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .delete-btn {
      position: absolute;
      top: 4px;
      right: 4px;
      background: rgba(255, 0, 0, 0.6);
      color: white;
      border: none;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .add-photo-btn {
      min-width: 120px;
      height: 120px;
      background: #eee;
      border: 1px dashed #ccc;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      flex-shrink: 0;
    }

    .food-section, .highlight-section {
      padding: 15px;
      background: white;
      margin-top: 10px;
    }

    .food-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 10px;
    }

    .food-card {
      background: #fff8e1;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }

    .highlight-item {
      border: 2px solid var(--highlight-border);
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
    }

    [contenteditable]:focus {
      outline: none;
      background-color: #fffde7;
    }

    .hidden-input {
      display: none;
    }

    @media (max-width: 768px) {
      .info-line {
        flex-wrap: wrap;
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

<header class="trip-header">
  <canvas class="canvas-bg" id="snowCanvas"></canvas>
  <h1 contenteditable="true">ä¸­æ¬§ä¸‰å›½å†¬æ—¥æ…¢æ—…</h1>
  <p contenteditable="true">ç©¿è¶Šæ·å…‹ã€å¥¥åœ°åˆ©ä¸åŒˆç‰™åˆ©ï¼Œæ„Ÿå—å†¬æ—¥ç«¥è¯ä¸å†å²éŸµå‘³äº¤ç»‡çš„é­…åŠ›ã€‚</p>
  <div class="info-line">
    <span>ğŸ“… 2025.12.12 - 2025.12.15</span>
    <span>â„ï¸ å¤šäº‘è½¬æ™´ï¼Œæ°”æ¸©0~6Â°C</span>
    <span>ğŸ‘£ æ€»æ­¥æ•°ï¼š63390</span>
    <span>ğŸ˜Š å¿ƒæƒ…ï¼šæ¸©æš–æ²»æ„ˆ</span>
  </div>
</header>

<section class="trip-overview">
  <div id="map"></div>
</section>

<section class="city-block">
  <!-- å¸ƒæ‹‰æ ¼ -->
  <div class="day-block">
    <div class="day-title" onclick="toggleDay(this)">ğŸ“ å¸ƒæ‹‰æ ¼ Â· ç¬¬ä¸€å¤©</div>
    <div class="timeline-container">
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">08:35</div>
        <h3 contenteditable="true">æ™¨æ›¦ä¸­çš„å¸ƒæ‹‰æ ¼</h3>
        <p contenteditable="true">æ¸…æ™¨å‡ºå‘å‰å¾€å›½å®¶åšç‰©é¦†ï¼Œé¿å¼€äººæµé«˜å³°ï¼Œäº«å—å®é™çš„åŸå¸‚æ°›å›´ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img0.baidu.com/it/u=2277284990,2493739297&fm=253&app=138&f=JPEG?w=800&h=1067" alt="æ¸…æ™¨å¸ƒæ‹‰æ ¼"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="image-wrapper">
            <img src="https://img1.baidu.com/it/u=2692446686,2531845848&fm=253&app=138&f=JPEG?w=1067&h=800" alt="å›½å®¶åšç‰©é¦†"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">11:30</div>
        <h3 contenteditable="true">æŸ¥ç†å¹¿åœºæ¼«æ­¥</h3>
        <p contenteditable="true">å…¬å›­ç»¿åœ°ç¯ç»•çš„æŸ¥ç†å¹¿åœºéå¸¸é€‚åˆåˆåå°æ†©ï¼Œè¿œå¤„å“¥ç‰¹å»ºç­‘å°½æ”¶çœ¼åº•ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img0.baidu.com/it/u=3410437965,450585960&fm=253&app=138&f=JPEG?w=800&h=1067" alt="æŸ¥ç†å¹¿åœº"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
    </div>
  </div>

  <!-- å¡ç½—ç»´å‘åˆ© & çš®å°”æ£® -->
  <div class="day-block">
    <div class="day-title" onclick="toggleDay(this)">ğŸ“ å¡ç½—ç»´å‘åˆ© & çš®å°”æ£® Â· ç¬¬ä¸€å¤©</div>
    <div class="timeline-container">
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">14:12</div>
        <h3 contenteditable="true">æ¸©æ³‰å°é•‡æ¢å¹½</h3>
        <p contenteditable="true">æŠµè¾¾å¡ç½—ç»´å‘åˆ©ï¼Œæ„Ÿå—è¿™åº§ä»¥æ¸©æ³‰é—»åçš„å°é•‡ç‹¬ç‰¹é­…åŠ›ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img1.baidu.com/it/u=1217472396,1689805901&fm=253&app=138&f=JPEG?w=1067&h=800" alt="å¡ç½—ç»´å‘åˆ©"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">16:57</div>
        <h3 contenteditable="true">å…±å’Œå›½å¹¿åœºæ å½±</h3>
        <p contenteditable="true">å‚æ™šæ—¶åˆ†åˆ°è¾¾çš®å°”æ£®ï¼Œå¹¿åœºä¸Šçš„å–·æ³‰å’Œå•¤é…’æ–‡åŒ–è®©äººå°è±¡æ·±åˆ»ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img0.baidu.com/it/u=3799519592,2658228833&fm=253&app=138&f=JPEG?w=800&h=1067" alt="å…±å’Œå›½å¹¿åœº"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
    </div>
  </div>

  <!-- æ—èŒ¨ -->
  <div class="day-block">
    <div class="day-title" onclick="toggleDay(this)">ğŸ“ æ—èŒ¨ Â· ç¬¬äºŒå¤©</div>
    <div class="timeline-container">
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">06:35</div>
        <h3 contenteditable="true">æ™¨é—´æ•£æ­¥</h3>
        <p contenteditable="true">æ¸…æ™¨åœ¨æ—èŒ¨å¸‚åŒºæ¼«æ­¥ï¼Œç©ºæ°”æ¸…æ–°ï¼Œé˜³å…‰é€è¿‡æ ‘æ¢¢æ´’æ»¡å¤§åœ°ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img2.baidu.com/it/u=761050746,2876467311&fm=253&app=138&f=JPEG?w=1067&h=800" alt="æ—èŒ¨æ¸…æ™¨"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="image-wrapper">
            <img src="https://img2.baidu.com/it/u=1247860584,1746893269&fm=253&app=138&f=JPEG?w=1067&h=800" alt="æ—èŒ¨å…¬å›­"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">11:30</div>
        <h3 contenteditable="true">åœ£ç›ä¸½å¤§æ•™å ‚</h3>
        <p contenteditable="true">å‚è§‚å®ä¼Ÿçš„å¤§æ•™å ‚ï¼Œå†…éƒ¨å£ç”»ç²¾ç¾ç»ä¼¦ï¼Œä»¤äººå¹ä¸ºè§‚æ­¢ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img1.baidu.com/it/u=41760383,2107500715&fm=253&app=138&f=JPEG?w=1199&h=800" alt="åœ£ç›ä¸½å¤§æ•™å ‚"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
    </div>
  </div>

  <!-- åœ£æ²ƒå°”å¤«å†ˆå°é•‡ & å“ˆå°”æ–¯å¡”ç‰¹ -->
  <div class="day-block">
    <div class="day-title" onclick="toggleDay(this)">ğŸ“ åœ£æ²ƒå°”å¤«å†ˆ & å“ˆå°”æ–¯å¡”ç‰¹ Â· ç¬¬äºŒå¤©</div>
    <div class="timeline-container">
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">14:12</div>
        <h3 contenteditable="true">ç«¥è¯èˆ¬çš„å°é•‡é£å…‰</h3>
        <p contenteditable="true">ä»æ—èŒ¨é©±è½¦å‰å¾€åœ£æ²ƒå°”å¤«å†ˆï¼Œæ²¿é€”é£æ™¯å¦‚ç”»ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img2.baidu.com/it/u=2862622836,1107065998&fm=253&app=138&f=JPEG?w=800&h=1200" alt="åœ£æ²ƒå°”å¤«å†ˆ"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">20:00</div>
        <h3 contenteditable="true">å¤œå¹•ä¸‹çš„å“ˆå°”æ–¯å¡”ç‰¹</h3>
        <p contenteditable="true">å¤œæ™šç¯ç«è¾‰ç…Œçš„å“ˆå°”æ–¯å¡”ç‰¹æ¹–ç•”ï¼Œä»¿ä½›ç½®èº«æ¢¦å¢ƒã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img1.baidu.com/it/u=1247804454,253503138&fm=253&app=138&f=JPEG?w=1199&h=800" alt="å“ˆå°”æ–¯å¡”ç‰¹å¤œæ™¯"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
    </div>
  </div>

  <!-- é»‘ç»´å…¹æ¸©æ³‰æ¹– & å·´æ‹‰é¡¿æ¹– -->
  <div class="day-block">
    <div class="day-title" onclick="toggleDay(this)">ğŸ“ åŒˆç‰™åˆ© Â· ç¬¬ä¸‰å¤©</div>
    <div class="timeline-container">
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">07:52</div>
        <h3 contenteditable="true">é»‘ç»´å…¹æ¸©æ³‰æ¹–æ™¨æµ´</h3>
        <p contenteditable="true">æ—©èµ·ä½“éªŒä¸–ç•Œå”¯ä¸€çš„å¤©ç„¶æ¸©æ³‰æ¹–ï¼Œæ¸©æš–é©±æ•£å¯’æ„ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img1.baidu.com/it/u=655841868,1061346746&fm=253&app=138&f=JPEG?w=1067&h=800" alt="é»‘ç»´å…¹æ¸©æ³‰æ¹–"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">09:38</div>
        <h3 contenteditable="true">å·´æ‹‰é¡¿æ¹–å°é•‡æ¢ç§˜</h3>
        <p contenteditable="true">æ¢è®¿å®é™ç¾ä¸½çš„å·´æ‹‰é¡¿æ¹–ç•”å°é•‡ï¼Œå“å°åœ°é“åŒˆç‰™åˆ©ç¾é£Ÿã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://gips0.baidu.com/it/u=1397349768,1065867809&fm=3074&app=3074&f=JPEG" alt="å·´æ‹‰é¡¿å°é•‡"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="image-wrapper">
            <img src="https://gips3.baidu.com/it/u=220983153,2361111712&fm=3074&app=3074&f=JPEG" alt="å·´æ‹‰é¡¿æ¹–æ™¯"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">13:12</div>
        <h3 contenteditable="true">è’‚è±ªå°¼åŠå²›ä¸€æ—¥æ¸¸</h3>
        <p contenteditable="true">ç™»ä¸ŠåŠå²›ç¯å¡”ä¿¯ç°å…¨æ™¯ï¼Œæ¬£èµå·´æ´›å…‹ä¿®é“é™¢ä¸è‘¡è„å›­é£å…‰ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://gips1.baidu.com/it/u=3673957783,2838332118&fm=3074&app=3074&f=JPEG" alt="è’‚è±ªå°¼åŠå²›"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="time-point" contenteditable="true">20:07</div>
        <h3 contenteditable="true">ç»´ä¹Ÿçº³åŸå ¡å‰§é™¢ä¹‹å¤œ</h3>
        <p contenteditable="true">æœ€åä¸€ç«™æ¥åˆ°ç»´ä¹Ÿçº³ï¼Œåœ¨å¤å…¸éŸ³ä¹æ®¿å ‚ç»“æŸæ—…ç¨‹ã€‚</p>
        <div class="image-grid">
          <div class="image-wrapper">
            <img src="https://img2.baidu.com/it/u=3648034682,1714405036&fm=253&fmt=auto&app=138&f=JPEG?w=750&h=500" alt="ç»´ä¹Ÿçº³å‰§é™¢"/>
            <button class="delete-btn" onclick="deleteImage(this)">Ã—</button>
          </div>
          <div class="add-photo-btn" onclick="addImage(this.parentNode)">+</div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="food-section">
  <h2>ğŸ½ï¸ ç¾é£Ÿåˆé›†</h2>
  <div class="food-grid">
    <div class="food-card">
      <strong contenteditable="true">æ·å…‹çƒ¤çŒªè‚˜</strong><br/>
      ğŸ– <span contenteditable="true">å¤–ç„¦é‡Œå«©ï¼Œæ­é…é…¸èœå’Œé¢åŒ…</span><br/>
      â­ <span contenteditable="true">å¼ºçƒˆæ¨èï¼</span>
    </div>
    <div class="food-card">
      <strong contenteditable="true">åŒˆç‰™åˆ©ç‚–ç‰›è‚‰æ±¤</strong><br/>
      ğŸ² <span contenteditable="true">æµ“éƒé¦™è¾£ï¼Œæš–èƒƒåˆæš–å¿ƒ</span><br/>
      â­ <span contenteditable="true">é€‚åˆå†¬å¤©äº«ç”¨</span>
    </div>
    <div class="food-card">
      <strong contenteditable="true">å¥¥åœ°åˆ©è¨èµ«è›‹ç³•</strong><br/>
      ğŸ° <span contenteditable="true">å·§å…‹åŠ›å‘³æµ“éƒï¼Œå…¥å£å³åŒ–</span><br/>
      â­ <span contenteditable="true">å¿…è¯•ç”œå“</span>
    </div>
  </div>
</section>

<section class="highlight-section">
  <h2>âœ¨ é«˜å…‰æ—¶åˆ»</h2>
  <div class="highlight-item">
    <h3 contenteditable="true">å¤œè‰²ä¸­çš„å“ˆå°”æ–¯å¡”ç‰¹</h3>
    <p contenteditable="true">å½“ç¯å…‰ç‚¹äº®æ¹–é¢é‚£ä¸€åˆ»ï¼Œæ•´ä¸ªä¸–ç•Œéƒ½å®‰é™ä¸‹æ¥ï¼Œåªæœ‰å¿ƒè·³å£°ã€‚</p>
    <img src="https://img1.baidu.com/it/u=1247804454,253503138&fm=253&app=138&f=JPEG?w=1199&h=800" style="width:100%;height:auto;border-radius:8px;" />
  </div>
</section>

<input type="file" class="hidden-input" id="global-file-input" accept="image/*"/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // åˆå§‹åŒ–åœ°å›¾
  const map = L.map('map').setView([48.2082, 16.3738], 6); // é»˜è®¤ä¸­å¿ƒç‚¹è®¾ä¸ºç»´ä¹Ÿçº³é™„è¿‘
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // æ·»åŠ æ ‡è®°ç‚¹ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
  const markers = [
    { latlng: [50.0755, 14.4378], popup: "å¸ƒæ‹‰æ ¼" },
    { latlng: [50.2318, 12.8716], popup: "å¡ç½—ç»´å‘åˆ©" },
    { latlng: [49.7475, 13.3776], popup: "çš®å°”æ£®" },
    { latlng: [48.3069, 14.2858], popup: "æ—èŒ¨" },
    { latlng: [47.9167, 13.5000], popup: "åœ£æ²ƒå°”å¤«å†ˆ" },
    { latlng: [47.5584, 13.6189], popup: "å“ˆå°”æ–¯å¡”ç‰¹" },
    { latlng: [46.7667, 17.1833], popup: "å·´æ‹‰é¡¿æ¹–" },
    { latlng: [47.7167, 17.2167], popup: "è’‚è±ªå°¼" },
    { latlng: [47.6667, 17.6333], popup: "é»‘ç»´å…¹æ¸©æ³‰æ¹–" },
    { latlng: [48.2082, 16.3738], popup: "ç»´ä¹Ÿçº³" }
  ];

  const points = [];
  markers.forEach(marker => {
    L.marker(marker.latlng).addTo(map).bindPopup(marker.popup);
    points.push(marker.latlng);
  });

  // è¿æ¥è½¨è¿¹çº¿
  L.polyline(points, {color: '#4a6fa5'}).addTo(map);

  // å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
  function replaceImage(imgEl) {
    document.getElementById('global-file-input').onchange = e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = evt => imgEl.src = evt.target.result;
      reader.readAsDataURL(file);
    };
    document.getElementById('global-file-input').click();
  }

  function addImage(container) {
    document.getElementById('global-file-input').onchange = e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = evt => {
        const wrapper = document.createElement('div');
        wrapper.className = 'image-wrapper';
        const img = document.createElement('img');
        img.src = evt.target.result;
        img.onclick = () => replaceImage(img);
        const delBtn = document.createElement('button');
        delBtn.textContent = 'Ã—';
        delBtn.className = 'delete-btn';
        delBtn.onclick = () => deleteImage(delBtn);
        wrapper.appendChild(img);
        wrapper.appendChild(delBtn);
        container.insertBefore(wrapper, container.lastChild);
      };
      reader.readAsDataURL(file);
    };
    document.getElementById('global-file-input').click();
  }

  function deleteImage(btn) {
    btn.parentElement.remove();
  }

  // æ‰€æœ‰å›¾ç‰‡ç»‘å®šç‚¹å‡»äº‹ä»¶
  document.querySelectorAll('.image-wrapper img').forEach(img => {
    img.addEventListener('click', () => replaceImage(img));
  });

  // æŠ˜å å±•å¼€é€»è¾‘
  function toggleDay(titleEl) {
    const container = titleEl.nextElementSibling;
    if (container.style.display === 'none') {
      container.style.display = 'flex';
    } else {
      container.style.display = 'none';
    }
  }

  // é›ªèŠ±èƒŒæ™¯åŠ¨ç”»
  window.onload = function() {
    const canvas = document.getElementById('snowCanvas');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = document.querySelector('.trip-header').offsetHeight;

    const particles = [];
    for (let i = 0; i < 100; i++) {
      particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 2 + 1,
        d: Math.random() * 1 + 1
      });
    }

    function draw() {
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      ctx.beginPath();
      for (let i = 0; i < particles.length; i++) {
        const p = particles[i];
        ctx.moveTo(p.x, p.y);
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
      }
      ctx.fill();
      update();
    }

    function update() {
      for (let i = 0; i < particles.length; i++) {
        const p = particles[i];
        p.y += p.d;
        p.x += Math.sin(p.y * 0.05) * 0.5;
        if (p.y > h) {
          particles[i] = { x: Math.random() * w, y: 0, r: p.r, d: p.d };
        }
      }
    }

    setInterval(draw, 30);
  };
</script>
</body>
</html>