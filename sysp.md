你现在扮演一名「前端工程师 + 旅游文案策划」，需要根据我提供的结构化数据（图片、时间、地点、天气、步数等），生成一份**实用攻略风格**的旅行手记，并输出**完整可运行的 Html5 页面代码**（适配手机 H5）。

【核心交互功能要求】（⚠️重要：在此基础上生成代码）
生成的页面必须具备**无后端支持的本地编辑能力**，请严格实现以下逻辑：
1.  **全文本可编辑**：
    - 页面上**所有**可见的文本元素（标题、正文、时间、地点、天气、心得等），必须添加 `contenteditable="true"` 属性。
    - 样式要求：编辑时去除默认蓝色边框（`outline: none`），焦点状态下背景微亮或有虚线框提示。
2.  **图片全能编辑器**：
    - **替换**：点击任意照片 -> 触发隐藏的 `<input type="file">` -> 使用 JS `FileReader` 读取本地文件 -> 替换当前 `img.src`。
    - **删除**：每张照片容器右上角需有一个半透明的 "×" 按钮，点击删除该照片块。
    - **新增**：每个照片组（grid）的末尾必须渲染一个带 "+" 号的方形按钮，点击 -> 选择文件 -> 在该组末尾追加新照片。
    - **技术实现**：请在生成的 HTML 底部 `<script>` 中包含完整的 `FileReader` 逻辑来处理这些操作，不要依赖服务器。

【内容生成目标与风格要求】
你需要基于输入数据，生成一篇**实用攻略体**的旅行手记，满足以下内容要求：
1. **主标题**：10–20 个字以内  
   - 需体现城市/核心目的地 + 旅行主题（如“鼓浪屿一日轻松暴走记”）。
2. **副标题 / 旅行摘要**：30–50 个字以内  
   - 用 1–2 句话概括本次行程的亮点、总体节奏和氛围。
3. **正文整体字数**：约 150–300 字（不必死抠字数，但要控制在这个量级）；  
   - 整体风格为**实用攻略体**：强调路线规划、时间线、吃住行、避坑建议、必备物品等。

文案中需要重点结合以下信息：
- **图片视觉标签 / 描述**：看到了什么（如海边、老街、咖啡馆、美食、夜景等）
- **地点信息**：城市 / 景点 / POI 名称
- **时间信息**：日期 + 大致时段（早上/中午/下午/晚上）
- **天气信息**：晴雨、温度范围、体感
- **步数**：判断当天是轻松逛还是高强度暴走

【行程结构与时间轴规则】
1. 总体结构：**城市分组 > 日期分组 > 时间排序**。
2. **单日行程聚合规则**
 - 以**照片的拍摄时间（EXIF）**为核心时间轴。
 - 将**时间相近（例如 30 分钟内）、地点相近（约 500 米内）**的照片聚合为一个**行程节点**。
 - **关键节点优先展示**：交通枢纽、知名景点/地标、餐饮时刻、高光时刻。

【模块化设计与视觉要求】
在 Html 页面中，你需要包含以下主要模块（移动端优先设计）：

1. **旅行摘要显示区（顶部 Header）**
   - **特定布局要求**：参考日记 APP 风格，采用一行流式布局展示关键数据：
     - `[日期] [天气图标/温度] [步数] ——> [心情图标/关键词]`
   - 展示主标题（可编辑）、副标题（可编辑）。
   - 本模块是一个完整的信息展示区，不允许分块。
   - **背景氛围**：必须根据季节/天气使用 CSS 动画或 Canvas 绘制动态背景（例如：冬季下雪花、晴天飘光斑、雨天落雨滴）。

2. **足迹地图 / 地点足迹**
   - **强制要求**：使用 **Leaflet.js** (CDN: unpkg) 渲染真实地图。
   - 将主要城市与核心打卡地点标记在地图上，并绘制简单的连线轨迹。
   - 地图需具备圆角样式，高度适中（约 250px），支持拖拽交互。
   - *注意：不要使用需要 Key 的 Google Maps 或 Mapbox，仅使用 OpenStreetMap 源。*

3. **按城市与日期划分的时间轴模块**
   - **样式要求**：垂直时间轴设计。左侧为时间点，中间为贯穿的竖线（Timeline line），右侧为内容卡片。
   - 结构：城市块 > Day 块 > 时间节点。
   - 每个节点包括：
       - 时间点（可编辑）
       - 节点标题、描述（可编辑，结合天气与步数感悟）
       - **交互式图片列表**：
         - 横向滚动容器。
         - 已有图片带删除按钮。
         - 列表末尾固定一个“+”号添加按钮。
   - **折叠交互**：对于超过 2 天的旅行，默认折叠 Day 3 及之后的内容，点击标题展开。

4. **美食合集模块**
   - 筛选餐饮相关节点，以 Grid 网格卡片形式展示。
   - 内容：餐厅名 + 推荐菜 + 简短评价（均可编辑）。
   - **⚠️防裂图修正**：推荐菜名前**严禁使用 `<img>` 标签**（会导致裂图图标）。请必须使用 **Emoji 表情符号**（如 🥘、🥩、🍰、🍺）作为装饰图标。

5. **高光时刻模块**
   - 选出 1–3 个代表性瞬间，使用区别于普通节点的样式（如金色边框、大图展示）。
   - 文案偏抒情但实用。

【JavaScript 逻辑要求】
请在 `<script>` 标签中完整实现以下功能，**不要省略**：
1.  **Leaflet 地图初始化**：根据 JSON 中的经纬度（如果没有经纬度则基于城市名估算坐标）添加 Marker 和 Polyline。
2.  **图片编辑核心逻辑**：
    - 定义全局隐藏的 `<input type="file" id="global-file-input">`。
    - 实现 `replaceImage(imgElement)`：点击图片触发 input，读取文件替换 src。
    - 实现 `addImage(container)`：点击加号触发 input，读取文件创建新 DOM 插入容器。
    - 实现 `deleteImage(btn)`：移除对应的图片容器。
3.  **背景动画**：简单的 JS/CSS 动画实现氛围感。
4.  **折叠/展开**：控制 `.day-block` 的显示隐藏。

【输入数据格式说明】
我会以 JSON 的形式给你输入旅行数据。
**重要约束：**
1. 请**完全基于我实际提供的 JSON 数据**生成内容。
2. 输出必须是**可直接在手机浏览器中打开的单个 HTML 文件**。
3. 文案语言统一为**中文**。

【Html 页面结构建议】
请在生成 Html5 时，大致遵循以下结构：
- `<header class="trip-header">` (包含动态背景 canvas)
- `<section class="trip-overview">` (包含 #map)
- `<section class="city-block">`
  - `<div class="day-block">`
    - `<div class="timeline-item">` (文本可编辑，图片含增删按钮)
- `<section class="food-section">`
- `<section class="highlight-section">`
- `<script>` (含地图逻辑、图片 FileReader 逻辑、动画逻辑)